<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Mejora tus gráficos con ggplot2</title>
    <meta charset="utf-8" />
    <meta name="author" content="Mireia Ramos-Rodríguez (adaptado al español por Andree Valle Campos)" />
    <meta name="date" content="2021-02-05" />
    <script src="libs/header-attrs-2.6/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Mejora tus gráficos con <code>ggplot2</code>
## ⚔<br/>R-Ladies Barcelona Workshop
### Mireia Ramos-Rodríguez<br/>(adaptado al español por Andree Valle Campos)
### 2021-02-05

---

class: inverse, center, middle








---
class: inverse, center, middle

# La gramática de `ggplot2`

&lt;!---------------------------------------- BUILDING PLOTS one layer at a time -----------------------------------&gt;
---
layout: true
class: left, top

## Construyendo gráficos una capa por tiempo

---
.left-code[

```r
ggplot(iris)
```

### Data

]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas1-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) 
```

#### Data
### Mapeos

]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas2-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
*    geom_point() 
```

#### Data
#### Mapeos
### Geometrías
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas3-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
*   scale_color_brewer(palette="Dark2") 
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
### Escalas
]
.pull-right[]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas4-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
*   stat_summary(fun="mean", geom= "line") 
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
### Transformaciones estadísticas
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas5-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
*   coord_flip()
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Transformaciones estadísticas
### Sistemas de coordenadas
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas6-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
*   facet_wrap(~Species)
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Transformaciones estadísticas
#### Sistemas de coordenadas
### Paneles (facet)
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas7-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
    facet_wrap(~Species) +
*   theme_bw() + theme(legend.position="top")
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Transformaciones estadísticas
#### Sistemas de coordenadas
#### Paneles (facet)
### Temas
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas8-1.svg)
]

---
.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
    facet_wrap(~Species) +
    theme_bw() + theme(legend.position="top") +
*   annotate("text", x=7.5, y=2.5, label="Pval")
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Transformaciones estadísticas
#### Sistemas de coordenadas
#### Paneles (facet)
#### Temas
### Anotaciones
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas9-1.svg)
]


&lt;!---------------------------------------- GGPLOT2 BASICS -----------------------------------&gt;
---
layout: false
class: inverse, middle, center
# ¡Vamos a darle una mirada más de cerca!

---
layout: true
class: left, top

## `ggplot2` Básico

---
class: highlight

.left-code[

```r
ggplot(iris)
```

### Data

]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas1-1.svg)
]

---

.left-column[

## Data
`ggplot()`

]

.right-column[

El primer paso para graficar es tener tu data en formato __tidy__ (largo):

1. Cada __variable__ es una __column__.
2. Cada __observation__ es una __row__.

.pull-left[

#### Formato Wide (messy) 

Drug | Response.CTRL | Response.T1D
-----|---------------|----------------
A	| 3	| 12
B | 6 |	56
C	| 8 |	2

]

.pull-right[

#### formato Long (tidy) 

Drug | Patient | Response
-----|---------|----------
A |	CTRL | 3
B	| CTRL | 6
C | CTRL | 8
A	| T1D	| 23
B	| T1D	| 56
C	| T1D	| 2
]
]




---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) 
```

#### Data
### Mapeos

]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas2-1.svg)
]
---
.left-column[
### Data
## Mapeos
`aes()`
]

.right-column[
El argumento __aesthetics__ indica cómo mapeamos la columna de datos a elementos visuales o parámetros.

- Variable 1 → **x**
- Variable 2 → **y**
- Variable 3 → **color**, fill, shape, etc.

Todo Mapeo necesita ser definida dentro de una función `aes()`.

Puedes definir Mapeos para:
- **gráfico completo** incluyéndolo en la función `ggplot()`.
- **geometría específica** incluyéndolo en la función `geom_XXX()`.
]

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
*    geom_point() 
```

#### Data
#### Mapeos
### Geometrías
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas3-1.svg)
]

---
.left-column[
### Data
### Mapeos
## Geometrías
`geom_*()`
]

.right-column[
Las **geometrías** indican cuáles formas geométricas deben ser graficadas usando los parámetros y variables definidas en `aes()`.













Type       | Function           | Image
-----------|--------------------|-----------------------------------------------
Point      | `geom_point()`     | ![](presentation_ggplot2_files/figure-html/geom-point-1.svg)
Line       | `geom_line()`      | ![](presentation_ggplot2_files/figure-html/geom-line-1.svg)
Bar        | `geom_bar()`       | ![](presentation_ggplot2_files/figure-html/geom-bar-1.svg)
Histogram  | `geom_histogram()` | ![](presentation_ggplot2_files/figure-html/geom-hist-1.svg)
Regression | `geom_smooth()`    | ![](presentation_ggplot2_files/figure-html/geom-smooth-1.svg)
Boxplot    | `geom_boxplot()`   | ![](presentation_ggplot2_files/figure-html/geom-box-1.svg)
]

---
.left-column[
### Data
### Mapeos
## Geometrías
`geom_*()`
]

.right-column[
Las **geometrías** indican cuáles formas geométricas deben ser graficadas usando los parámetros y variables definidas en `aes()`.

Estas son algunas de las funciones `geom_*` disponibles:


```
##  [1] "geom_abline"            "geom_area"              "geom_bar"              
##  [4] "geom_bin2d"             "geom_blank"             "geom_boxplot"          
##  [7] "geom_col"               "geom_contour"           "geom_contour_filled"   
## [10] "geom_count"             "geom_crossbar"          "geom_curve"            
## [13] "geom_density"           "geom_density_2d"        "geom_density_2d_filled"
## [16] "geom_density2d"         "geom_density2d_filled"  "geom_dotplot"          
## [19] "geom_errorbar"          "geom_errorbarh"         "geom_freqpoly"         
## [22] "geom_function"          "geom_hex"               "geom_histogram"        
## [25] "geom_hline"             "geom_jitter"            "geom_label"            
## [28] "geom_line"              "geom_linerange"         "geom_map"              
## [31] "geom_path"              "geom_point"             "geom_pointrange"       
## [34] "geom_polygon"           "geom_qq"                "geom_qq_line"          
## [37] "geom_quantile"          "geom_raster"            "geom_rect"             
## [40] "geom_ribbon"            "geom_rug"               "geom_segment"          
## [43] "geom_sf"                "geom_sf_label"          "geom_sf_text"          
## [46] "geom_smooth"            "geom_spoke"             "geom_step"             
## [49] "geom_text"              "geom_tile"              "geom_violin"           
## [52] "geom_vline"
```
]

---
layout: false
class: inverse, middle, center

# ¡Tiempo para algunos ejemplos y ejercicios!




---
layout: false
class: inverse, middle, center

## De retorno a lo básico

---
layout: true
class: left, top

## `ggplot2` Básico

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
*   scale_color_brewer(palette="Dark2")
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
### Escalas
]
.pull-right[
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas4-1.svg)
]


---
.left-column[
### Data
### Mapeos
### Geometrías
## Escalas
`scale_*_*()`
]

.right-column[
Adjusts the scales for your different aesthetic paramaters:

`scale` + `&lt;aes&gt;` + `&lt;type&gt;`, where:

- `&lt;aes&gt;` indicates the parameter you want to modify (_y_, _color_, _shape_)
- `&lt;type&gt;` indicates what type of variable `&lt;aes&gt;` is (or the modification you want to perform).

Some examples:

- `scale_x_discrete()` allows you to modify your discrete __x axis__.
- `scale_y_continuous()` allows you to modify your continuous __y axis__. 
- `scale_color_manual()` if you want to manually adjust the __colors__ of your discrete variable.
- `scale_fill_gradient()` allows you to adjut the colors of your __fill__ gradient (for a continuous variable).
]

---
.left-column[
### Data
### Mapeos
### Geometrías
## Escalas

`scale_*_*()`
]
.right-column[
Usually you will use **scales** to change the **color** and **fill** of your data. 

`ggplot2` has some built in color palettes and also provides wrapper functions to the [`RColorBrewer`](https://cran.r-project.org/web/packages/RColorBrewer/index.html) (`scale_fill_brewer`, `scale_color_brewer`). 

&lt;img src="presentation_ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="50%" style="display: block; margin: auto;" /&gt;

]

---
.left-column[
### Data
### Mapeos
### Geometrías
## Escalas

`scale_*_*()`
]
.right-column[
Usually you will use **scales** to change the **color** and **fill** of your data. 

`ggplot2` has some built in color palettes and also provides wrapper functions to the [`RColorBrewer`](https://cran.r-project.org/web/packages/RColorBrewer/index.html) (`scale_fill_brewer`, `scale_color_brewer`). 

There are additional R packages that provide more color palettes:

- **[`viridis`](https://github.com/sjmgarnier/viridis)**. color maps are designed in such a way that they will analytically be perfectly perceptually-uniform, both in regular form and also when converted to black-and-white. They are also designed to be perceived by readers with the most common form of color blindness. These re the new color maps from [Matplotib](https://matplotlib.org/).
- **[`colorspace`](https://colorspace.r-forge.r-project.org/articles/ggplot2_color_scales.html)**. The HCL space (= polar coordinates in CIELUV) is particularly useful for specifying individual colors and color palettes as its three axes match those of the human visual system very well: Hue (= type of color, dominant wavelength), chroma (= colorfulness), luminance (= brightness). All HCL-based color palettes in the colorspace package (Zeileis et al. 2019) are also provided as discrete, continuous, and binned color scales for the use with the ggplot2 package (Wickham 2016; Wickham et al. 2020).




---
layout: false
class: inverse, middle, center

## Time for more advanced functions!

---
layout: true
class: left, top

## Advanced `ggplot2` 

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
*   stat_summary(fun="mean", geom= "line") 
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
### Statistical transformations
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas5-1.svg)
]


---
.left-column[
## Statistical transformations
`stat_*()`
]

.right-column[
The `stat` functions and parameters perform statistical transformations on your data, for example:. 

- Plotting the **mean**  of your data points.
- Plotting the **standard error** of the mean of your data points.


```r
ggplot(iris, aes(Species, Petal.Width)) +
  geom_jitter(aes(color=Species)) +
  stat_summary(fun=mean, geom="point", size=4) +
  stat_summary(fun.data=mean_se, geom="errorbar")
```

&lt;img src="presentation_ggplot2_files/figure-html/unnamed-chunk-13-1.svg" width="50%" style="display: block; margin: auto;" /&gt;
]

---
.left-code[
### **Example 5**: Plot the _mean average ratings per season_ for each _TV series_.

```r
ggplot(df,
       aes(factor(season_number), average_rating,
           color=tvseries_title, 
           fill=tvseries_title)) +
  geom_jitter(width=0.2, alpha=0.5) +
  stat_summary(aes(group=tvseries_title), 
               fun=mean, geom="line",
               size=1) +
  stat_summary(fun=mean, geom="point", 
               size=4, pch=21, color="black") +
  palettetown::scale_color_poke(pokemon="charizard", 
                                name="TV series") +
  palettetown::scale_fill_poke(pokemon="charizard",
                               name="TV series") +
  xlab("Season number") + ylab("Average rating")
```
]

.right-plot[
![](presentation_ggplot2_files/figure-html/example-5-1.svg)  
]

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
*   coord_flip()
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Statistical transformations
### Coordinate systems
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas6-1.svg)
]

---
.left-column[
### Statistical transformations
## Coordinate systems
`coord_*()`
]

.right-column[
The **coordinate systems** define how the x and y combine to position the elements in the plot. 

The default coordinate system is **cartesian** (`coord_cartesian()`) and several functions can modify it:
- `coord_fixed()` maintains the same "aspect ratio" for the x and y axis.
- `coord_flip()` flips the x and y coordinates.

You can also transform your da to polar coordinates using `coord_polar()`.
]

---
.left-code[
### **Example 6**: Zoom into an specific region of the plot.

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=tvseries_title)) +
  scale_color_brewer(palette="Set1", 
                     name="TV series") +
  xlab("# of votes") + ylab("Average rating")
```
]

.right-plot[
![](presentation_ggplot2_files/figure-html/example-6-1.svg)  
]

---
.left-code[
### **Example 6**: Zoom into an specific region of the plot.

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=tvseries_title)) +
  scale_color_brewer(palette="Set1", 
                     name="TV series") +
  xlab("# of votes") + ylab("Average rating") +
* coord_cartesian(xlim=c(0,500), ylim=c(7,9))
```
]

.right-plot[
![](presentation_ggplot2_files/figure-html/example-6-corrected-1.svg)  
]

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
*   facet_wrap(~Species)
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Statistical transformations
#### Coordinate systems
### Facets
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas7-1.svg)
]

---
.left-column[
### Statistical transformations
### Coordinate systems
## Facets
`facet_*()`
]

.right-column[
Faceting generates different plots displaying different **subsets** of the data using a **discrete variable**.

There are two main functions for faceting:

- `facet_grid()`. Lay out panels in a grid using two discrete variables (`variable1 ~ variable2`).
- `facet_wrap()`. Creates a ribbon of panels displaying selecting the different values for your discrete variable.

]

---
.left-code[
### **Example 7**: Add classification according to the TV series title.

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=factor(season_number))) +
  scale_color_brewer(palette="Set1", 
                     name="Season") +
  xlab("# of votes") + ylab("Average rating") +
  ylim(0,10)
```
]

.right-plot[
![](presentation_ggplot2_files/figure-html/example-7-1.svg)  
]


---
.left-code[
### **Example 7**: Add classification according to the TV series title.

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=factor(season_number))) +
  scale_color_brewer(palette="Set1", 
                     name="Season") +
  xlab("# of votes") + ylab("Average rating") +
  ylim(0,10) +
* facet_wrap(~tvseries_title, scales="free_x")
```
]

.right-plot[
![](presentation_ggplot2_files/figure-html/example-7-corrected-1.svg)  
]

---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
    facet_wrap(~Species) +
*   theme_bw() + theme(legend.position="top")
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Statistical transformations
#### Coordinate systems
#### Facets
### Themes
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas8-1.svg)
]


---
.left-column[
### Statistical transformations
### Coordinate systems
### Facets
## Themes
`theme`
]

.right-column[
**Themes** allow you to tweak the overall look of the plot (only the elements that are not mapped to data).

#### Complete themes

You can find theme functions that change completely the look of the plot. Within `ggplot2` there are a few: `theme_bw()`, `theme_dark()`, `theme_gray()`, `theme_light()`, `theme_minimal()`.

There are additional packages that include other themes for `ggplot2`:

- [`ggthemes`](https://github.com/jrnold/ggthemes). Additional themes, scales, and geoms for ggplot2.
- [`tvthemes`](https://github.com/Ryo-N7/tvthemes). ggplot2 themes and palettes based on your favorite TV shows.
- [`hrbrthemes`](https://github.com/hrbrmstr/hrbrthemes/).  Opinionated, typographic-centric ggplot2 themes and theme components.
- [`vapoRwave`](https://github.com/moldach/vapoRwave/). Vaporwave themes and color palettes for ggplot2

**Complete themes** are a nice way of changing the overall look of your plot with one single function!
]

---
.left-column[
### Statistical transformations
### Coordinate systems
### Facets
## Themes
`theme`
]

.right-column[
**Themes** allow you to tweak the overall look of the plot (only the elements that are not mapped to data).

#### Specific theme elements
You can also change specific theme elements, such as the legend position, the size of the axis titles or the width of the axis lines by using the `theme()` function with the necessary arguments.

- `legend.position=c("none", "top", "right", "bottom", "left")`
- `axis.title=element_text(size=9)`
- `axis.line=element_line(size=2)`


You can check all the possible arguments you can pass to the `theme()` function [here](https://ggplot2.tidyverse.org/reference/theme.html).
]

---
.left-code[
### **Example 8**: Replace the default `ggplot2` theme for another one!

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=tvseries_title)) +
  scale_color_brewer(palette="Set1", 
                     name="TV series") +
  xlab("# of votes") + ylab("Average rating")
```
]
.right-plot[
![](presentation_ggplot2_files/figure-html/example-6-1.svg)  
]

---
.left-code[
### **Example 8**: Replace the default `ggplot2` theme for another one!

```r
ggplot(df,
       aes(num_votes, average_rating)) +
  geom_point(aes(color=tvseries_title)) +
  scale_color_brewer(palette="Set1", 
                     name="TV series") +
  xlab("# of votes") + ylab("Average rating") +
* theme_minimal()
```
]
.right-plot[
![](presentation_ggplot2_files/figure-html/example-8-corrected-1.svg)  
]




---
class: highlight

.left-code[

```r
ggplot(iris,
      aes(x=Sepal.Length, y=Sepal.Width, 
          color=Species)) +
    geom_point() +
    scale_color_brewer(palette="Dark2") +
    stat_summary(fun="mean", geom= "line") + 
    coord_flip() +
    facet_wrap(~Species) +
    theme_bw() + theme(legend.position="top") +
*   annotate("text", x=7.5, y=2.5, label="Pval")
```

.pull-left[
#### Data
#### Mapeos
#### Geometrías
#### Escalas
]
.pull-right[
#### Statistical transformations
#### Coordinate systems
#### Facets
#### Themes
### Annotation
]
]
.right-plot[
![](presentation_ggplot2_files/figure-html/gg-canvas9-1.svg)
]

---
.left-column[
### Statistical transformations
### Coordinate systems
### Facets
### Themes
## Annotations
`annotate`
]

.right-column[
Allows annotation of different types of `geom` by manually inputing the x and y values for the annotation.

You just need to add the funcion `annotate()` with the `geom` you want to use and the `x` and `y` coordinates where it should be drawn.

If you have used `facet_*()` the annotation will be displayed in all the panels!
]

---
layout: false
class: left, middle

## Saving your `ggplot2` graphs 

The function needed for saving ggplot graphs is `ggsave()`. 

By default, it will save the last plot you generated in the specified file `filename`. It will automatically extract the corredct format from your `filname` suffix ("png", "pdf", "svg" among others). 

Check all options typing `?ggsave`


```r
ggsave(filename="plot_example.png")
```





---
class: inverse, center, middle

# The end

&lt;img src="https://media.giphy.com/media/l4JySAWfMaY7w88sU/giphy.gif" width="50%" /&gt;



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
