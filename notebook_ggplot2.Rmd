---
title: "Improve your plots with `ggplot2`"
output: 
  html_notebook:
    code_folding: show
---

# The dataset

```{r, eval=FALSE}
# Install devtools
install.packages("devtools")

# Install the package tvseries
devtools::install_github("mireia-bioinfo/tvseries")
```

For this workshop wer are goint to use the dataset `tvseries_must_watch` from the `tvseries` R package. This dataset contins IMDb ratings for 4 TV series that I personally recommend you should watch! This TV series are: `c("Jane the Virgin", "Crazy Ex-Girlfriend", "Brooklyn Nine-Nine", "The Good Place")`. 

**Warning!** Do not load the `tvseries` library as it will take a while (it has some big datasets). Just assign the `tvseries_must_watch` dataset to a new variable as shown below:

```{r}
df <- tvseries::tvseries_must_watch
df <- df[!is.na(df$average_rating),] # Remove rows with NA average rating
head(df)
```

Here you have some description of dataset columns:

Name             | Description
-----------------|------------------------------------
`tvseries_title` | Name of the TV series.
`episode_title`  | Name of the episode.
`season_number`  | Season number.
`episode_number` | Episode number.
`start_year`     | Year the show started.
`end_year`       | Year the show ended.
`runtime_min`    | Length of the episode in minutes.
`genres`         | Genres of the TV series.
`average_rating` | Average rating of the episode.
`num_votes`      | Number of votes for that episode.

# Using `ggplot2`

```{r}
library(ggplot2)
```


## Basic plotting

### 1) Plot the number of votes for each TV series using boxplots


```{r}
ggplot(df,
       aes(tvseries_title, num_votes)) +
  geom_boxplot()
```

> Which TV series has the most votes average per episode?


### 2) Plot the average ratings for each TV series using boxplots

```{r}
ggplot(df,
       aes(tvseries_title, average_rating)) +
  geom_boxplot()
```

> Which TV series has the higher ratings per episode?

### 3) Plot the average ratings per season for each TV series using boxplots

```{r}
ggplot(df,
       aes(season_number, average_rating, color=tvseries_title)) +
  geom_boxplot()
```

> This looks weird... Anyone has any idea whay?

```{r}
ggplot(df,
       aes(factor(season_number), average_rating, color=tvseries_title)) +
  geom_boxplot()
```

```{r}
ggplot(df,
       aes(factor(season_number), average_rating, fill=tvseries_title)) +
  geom_boxplot()
```

### 4) Plot the total number of episodes for each TV series

```{r}
ggplot(df,
       aes(tvseries_title)) +
  geom_bar()
```

> Per season?

```{r}
ggplot(df,
       aes(tvseries_title, fill=factor(season_number))) +
  geom_bar()
```

```{r}
ggplot(df,
       aes(tvseries_title, fill=factor(season_number))) +
  geom_bar(position="fill") # in percentage
```

```{r}
ggplot(df,
       aes(tvseries_title, fill=factor(season_number))) +
  geom_bar(position="dodge") # in percentage
```